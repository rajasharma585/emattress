<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rilaxtion Mattress – Sleep Better</title>
  <meta name="description" content="Rilaxtion Mattress – premium mattresses, pillows & bedding. Free shipping, 100‑Night Trial, 10‑Year Warranty."/>

  <!-- Bootstrap 5.3 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    :root{
      --brand:#2b6cb0;          
      --brand-2:#0ea5e9;        
      --dark:#0f172a;           
      --muted:#6b7280;          
      --cream:#f8fafc;          
      --star:#f59e0b;           
    }
    body{font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;background:var(--cream);}
    .shadow-soft{box-shadow:0 10px 25px rgba(2,8,23,.08);} 
    .rounded-2xl{border-radius:1.25rem!important;}

    /* Mobile Header */
    .mobile-header {
      background: #000;
      color: white;
      padding: 10px 0;
      position: sticky;
      top: 0;
      z-index: 1050;
    }
    
    .logo-mobile {
      height: 40px;
      width: auto;
    }

    /* Desktop Navbar */
    .navbar-brand{font-weight:800;letter-spacing:.3px;color:var(--dark)!important}
    .badge-pill{border-radius:999px}

    /* Hero */
    .hero{background:linear-gradient(135deg, #e0f2fe 0%, #fafafa 50%, #ffffff 100%);} 
    .hero-img{max-width:600px;border-radius:1.25rem}

    /* Categories */
    .category-circle {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .category-circle:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    /* Product Cards */
    .product-card {
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .product-card:hover {
      transform: translateY(-5px);
    }
    
    .product-card .price{font-size:1.1rem;font-weight:700;color:var(--dark)}
    .product-card .old{color:#9ca3af;text-decoration:line-through;font-weight:500}
    .rating i{color:var(--star)}
    .wishlist{position:absolute;top:.75rem;right:.75rem}

    /* Single Product View */
    .product-detail-img {
      max-height: 400px;
      object-fit: cover;
    }
    
    .quantity-selector {
      display: flex;
      align-items: center;
      border: 1px solid #dee2e6;
      border-radius: 0.375rem;
      overflow: hidden;
    }
    
    .quantity-selector button {
      background: #f8f9fa;
      border: none;
      padding: 8px 12px;
      cursor: pointer;
    }
    
    .quantity-selector input {
      border: none;
      text-align: center;
      width: 60px;
      padding: 8px;
    }

    /* Checkout */
    .checkout-step {
      padding: 20px;
      background: white;
      border-radius: 1rem;
      margin-bottom: 20px;
    }

    /* Counters */
    .counter{font-size:2rem;font-weight:800;color:var(--dark)}
    .counter-wrap{background:#fff}

    /* Footer */
    footer a{color:#64748b;text-decoration:none}
    footer a:hover{color:var(--brand)}

    .toast-container{z-index:1080}
    
    /* Hide desktop on mobile */
    @media (max-width: 768px) {
      .desktop-only { display: none !important; }
      .mobile-only { display: block !important; }
    }
    
    /* Hide mobile on desktop */
    @media (min-width: 769px) {
      .mobile-only { display: none !important; }
      .desktop-only { display: block !important; }
    }
  </style>
</head>
<body>

<!-- Mobile Header -->
<div class="mobile-header mobile-only">
  <div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center">
      <button class="btn btn-link text-white p-0" onclick="toggleSidebar()">
        <i class="bi bi-list fs-4"></i>
      </button>
      <div class="flex-grow-1 mx-3">
        <div class="input-group">
          <input type="text" class="form-control form-control-sm" placeholder="Search products..." id="mobile-search">
          <button class="btn btn-outline-light btn-sm">
            <i class="bi bi-search"></i>
          </button>
        </div>
      </div>
      <div class="d-flex align-items-center gap-2">
        <button class="btn btn-link text-white p-0" onclick="showAuth()">
          <i class="bi bi-person fs-5"></i>
        </button>
        <button class="btn btn-link text-white p-0 position-relative" onclick="showCart()">
          <i class="bi bi-bag fs-5"></i>
          <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="mobile-cart-count">0</span>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Mobile Sidebar -->
<div class="offcanvas offcanvas-start mobile-only" tabindex="-1" id="mobileSidebar">
  <div class="offcanvas-header bg-dark text-white">
    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMTIwIDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMTIwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjMDAwMDAwIi8+Cjx0ZXh0IHg9IjYwIiB5PSIyNSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iI0ZGRkZGRiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCI+UklMQVhUSU9OPC90ZXh0Pgo8L3N2Zz4K" alt="Rilaxtion" class="logo-mobile">
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <nav class="nav flex-column">
      <a class="nav-link" href="#" onclick="showPage('home')">Home</a>
      <a class="nav-link" href="#" onclick="showPage('categories')">Categories</a>
      <a class="nav-link" href="#" onclick="showPage('products')">All Products</a>
      <a class="nav-link" href="#reviews">Reviews</a>
      <a class="nav-link" href="#faq">FAQ</a>
      <a class="nav-link" href="#contact">Contact</a>
    </nav>
  </div>
</div>

<!-- Desktop Navbar -->
<nav class="navbar navbar-expand-lg bg-white sticky-top shadow-sm desktop-only">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" href="#" onclick="showPage('home')">
      <i class="bi bi-moon-stars me-2 text-primary"></i>Rilaxtion <span class="ms-1 text-primary">Mattress</span>
    </a>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="#" onclick="showPage('categories')">Categories</a></li>
        <li class="nav-item"><a class="nav-link" href="#" onclick="showPage('products')">Products</a></li>
        <li class="nav-item"><a class="nav-link" href="#reviews">Reviews</a></li>
        <li class="nav-item"><a class="nav-link" href="#faq">FAQ</a></li>
        <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
      </ul>
      <div class="d-flex ms-lg-3">
        <div class="input-group me-3" style="width: 250px;">
          <input type="text" class="form-control" placeholder="Search..." id="desktop-search">
          <button class="btn btn-outline-primary"><i class="bi bi-search"></i></button>
        </div>
        <button class="btn btn-outline-primary me-2" onclick="showAuth()">
          <i class="bi bi-person"></i> Login
        </button>
        <button class="btn btn-primary position-relative" onclick="showCart()">
          <i class="bi bi-bag"></i> 
          <span class="badge bg-danger ms-1" id="desktop-cart-count">0</span>
        </button>
      </div>
    </div>
  </div>
</nav>

<!-- Main Content -->
<div id="app">
  <!-- Home Page -->
  <div id="home-page" class="page">
    <!-- Hero -->
    <header class="hero py-5 py-lg-6">
      <div class="container">
        <div class="row align-items-center g-4">
          <div class="col-lg-6">
            <span class="badge text-bg-primary badge-pill mb-3">100‑Night Trial • Free Shipping • 10‑Year Warranty</span>
            <h1 class="display-5 fw-bold text-dark">Sleep better with <span class="text-primary">Rilaxtion</span></h1>
            <p class="lead text-secondary">Premium memory foam and hybrid mattresses engineered for India's climate—cooler sleep, superior spine alignment, and plush comfort.</p>
            <div class="d-flex gap-2">
              <button onclick="showPage('products')" class="btn btn-primary btn-lg"><i class="bi bi-bag me-1"></i> Shop Now</button>
              <a href="#why" class="btn btn-outline-primary btn-lg">Why Rilaxtion?</a>
            </div>
            <div class="d-flex align-items-center gap-2 mt-3">
              <div class="rating">
                <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-half"></i>
              </div>
              <small class="text-muted">4.8/5 from 3,200+ happy sleepers</small>
            </div>
          </div>
          <div class="col-lg-6 text-center">
            <img class="img-fluid hero-img shadow-soft" alt="Rilaxtion mattress" src="headingimage1.jpg"/>
          </div>
        </div>
      </div>
    </header>

    <!-- USP Strip -->
    <section id="why" class="py-4">
      <div class="container">
        <div class="row g-3">
          <div class="col-6 col-lg-3">
            <div class="p-3 bg-white rounded-2xl shadow-soft h-100 d-flex align-items-center gap-3">
              <i class="bi bi-truck fs-3 text-primary"></i> 
              <div><div class="fw-bold">Free Delivery</div><small class="text-muted">Across India</small></div>
            </div>
          </div>
          <div class="col-6 col-lg-3">
            <div class="p-3 bg-white rounded-2xl shadow-soft h-100 d-flex align-items-center gap-3">
              <i class="bi bi-arrow-repeat fs-3 text-primary"></i> 
              <div><div class="fw-bold">100‑Night Trial</div><small class="text-muted">Easy returns</small></div>
            </div>
          </div>
          <div class="col-6 col-lg-3">
            <div class="p-3 bg-white rounded-2xl shadow-soft h-100 d-flex align-items-center gap-3">
              <i class="bi bi-shield-check fs-3 text-primary"></i> 
              <div><div class="fw-bold">10‑Year Warranty</div><small class="text-muted">Guaranteed</small></div>
            </div>
          </div>
          <div class="col-6 col-lg-3">
            <div class="p-3 bg-white rounded-2xl shadow-soft h-100 d-flex align-items-center gap-3">
              <i class="bi bi-thermometer-sun fs-3 text-primary"></i> 
              <div><div class="fw-bold">Cool Technology</div><small class="text-muted">Beat the heat</small></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Categories -->
    <section class="py-5">
      <div class="container">
        <h2 class="fw-bold mb-4 text-center">Shop by Category</h2>
        <div class="row g-4 justify-content-center">
          <div class="col-6 col-md-3 text-center" onclick="showCategoryProducts('Memory Foam')">
            <div class="category-circle">
              <i class="bi bi-cloud fs-2 text-primary"></i>
            </div>
            <h6 class="fw-bold">Memory Foam</h6>
            <small class="text-muted">Pressure Relief</small>
          </div>
          <div class="col-6 col-md-3 text-center" onclick="showCategoryProducts('Hybrid')">
            <div class="category-circle">
              <i class="bi bi-layers fs-2 text-primary"></i>
            </div>
            <h6 class="fw-bold">Hybrid</h6>
            <small class="text-muted">Spring + Foam</small>
          </div>
          <div class="col-6 col-md-3 text-center" onclick="showCategoryProducts('Orthopedic')">
            <div class="category-circle">
              <i class="bi bi-heart-pulse fs-2 text-primary"></i>
            </div>
            <h6 class="fw-bold">Orthopedic</h6>
            <small class="text-muted">Firm Support</small>
          </div>
          <div class="col-6 col-md-3 text-center" onclick="showCategoryProducts('Latex')">
            <div class="category-circle">
              <i class="bi bi-leaf fs-2 text-primary"></i>
            </div>
            <h6 class="fw-bold">Natural Latex</h6>
            <small class="text-muted">Eco-Friendly</small>
          </div>
        </div>
      </div>
    </section>

    <!-- Reviews -->
    <section id="reviews" class="py-5">
      <div class="container">
        <h2 class="fw-bold mb-4 text-center">What our customers say</h2>
        <div class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner rounded-2xl shadow-soft">
            <div class="carousel-item active bg-white p-4">
              <blockquote class="blockquote text-center">
                <p>"Finally waking up without back pain. Cooling layer really works in Delhi heat!"</p>
                <footer class="blockquote-footer">Aarav Mehra, New Delhi</footer>
              </blockquote>
            </div>
            <div class="carousel-item bg-white p-4">
              <blockquote class="blockquote text-center">
                <p>"Fast delivery, easy unboxing. Medium feel is perfect for both of us."</p>
                <footer class="blockquote-footer">Ananya Iyer, Bengaluru</footer>
              </blockquote>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="py-5">
      <div class="container">
        <h2 class="fw-bold mb-4 text-center">FAQ</h2>
        <div class="accordion rounded-2xl shadow-soft">
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                How does the 100‑Night Trial work?
              </button>
            </h2>
            <div id="faq1" class="accordion-collapse collapse show">
              <div class="accordion-body">
                Try the mattress for 100 nights. If it's not a match, we'll pick it up and issue a full refund.
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                Do you offer Cash on Delivery?
              </button>
            </h2>
            <div id="faq2" class="accordion-collapse collapse">
              <div class="accordion-body">
                Yes, COD is available in most serviceable pincodes. You can also pay online.
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="py-5">
      <div class="container">
        <div class="row g-4">
          <div class="col-lg-6">
            <div class="p-4 bg-white rounded-2xl shadow-soft h-100">
              <h3 class="fw-bold">Stay in touch</h3>
              <p class="text-muted">Get sleep tips & exclusive offers.</p>
              <div class="input-group">
                <input class="form-control" placeholder="Enter email"/>
                <button class="btn btn-primary">Subscribe</button>
              </div>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="p-4 bg-white rounded-2xl shadow-soft h-100">
              <h3 class="fw-bold">Need help?</h3>
              <p class="text-muted">Call +91 98765 43210 or WhatsApp us.</p>
              <button class="btn btn-outline-primary">Contact Support</button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Products Page -->
  <div id="products-page" class="page" style="display:none;">
    <div class="container py-4">
      <div class="d-flex align-items-center gap-3 mb-4">
        <button onclick="showPage('home')" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left"></i> Back
        </button>
        <div>
          <h2 class="fw-bold mb-0">All Products</h2>
          <small class="text-muted">Choose your perfect mattress</small>
        </div>
      </div>
      
      <div id="products-grid" class="row g-4"></div>
    </div>
  </div>

  <!-- Single Product Page -->
  <div id="product-detail-page" class="page" style="display:none;">
    <div class="container py-4">
      <div class="d-flex align-items-center gap-3 mb-4">
        <button onclick="showPage('products')" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left"></i> Back
        </button>
        <div>
          <h2 class="fw-bold mb-0" id="product-title">Product Details</h2>
          <small class="text-muted">Premium quality mattress</small>
        </div>
      </div>
      
      <div class="row g-4">
        <div class="col-lg-6">
          <img id="product-image" class="img-fluid rounded-2xl shadow-soft product-detail-img w-100" alt="Product">
        </div>
        <div class="col-lg-6">
          <div class="bg-white p-4 rounded-2xl shadow-soft">
            <h3 id="product-name" class="fw-bold mb-3"></h3>
            <div class="mb-3">
              <span id="product-price" class="fs-3 fw-bold text-primary"></span>
              <span id="product-old-price" class="text-muted text-decoration-line-through ms-2"></span>
            </div>
            <div class="rating mb-3">
              <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star"></i>
              <span class="ms-2 text-muted">4.2 (324 reviews)</span>
            </div>
            
            <div class="mb-3">
              <label class="form-label fw-bold">Size</label>
              <select class="form-select" id="product-size">
                <option value="Single">Single (72x36 in) - Base Price</option>
                <option value="Queen" selected>Queen (78x60 in) - +₹2000</option>
                <option value="King">King (78x72 in) - +₹5000</option>
              </select>
            </div>
            
            <div class="mb-3">
              <label class="form-label fw-bold">Thickness</label>
              <select class="form-select" id="product-thickness">
                <option value="6">6 inches - Base Price</option>
                <option value="8" selected>8 inches - +₹1500</option>
                <option value="10">10 inches - +₹3000</option>
              </select>
            </div>
            
            <div class="mb-3">
              <label class="form-label fw-bold">Quantity</label>
              <div class="quantity-selector">
                <button type="button" onclick="changeQuantity(-1)">−</button>
                <input type="number" id="product-quantity" value="1" min="1" max="10">
                <button type="button" onclick="changeQuantity(1)">+</button>
              </div>
            </div>
            
            <div class="d-grid gap-2">
              <button class="btn btn-primary btn-lg" onclick="addToCart(getCurrentProduct())">
                <i class="bi bi-bag-plus me-2"></i>Add to Cart
              </button>
              <button class="btn btn-success btn-lg" onclick="buyNow()">
                <i class="bi bi-lightning me-2"></i>Buy Now
              </button>
            </div>
            
            <div class="mt-4 p-3 bg-light rounded">
              <div class="d-flex align-items-center mb-2">
                <i class="bi bi-shield-check text-success me-2"></i>
                <span class="fw-bold">Secure Checkout</span>
              </div>
              <small class="text-muted">
                • 100-night trial period<br>
                • Free shipping & setup<br>
                • 10-year warranty<br>
                • Secure online payments
              </small>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Recommended Products -->
      <div class="mt-5">
        <h4 class="fw-bold mb-4">Recommended Products</h4>
        <div id="recommended-products" class="row g-4"></div>
      </div>
    </div>
  </div>

  <!-- Cart Page -->
  <div id="cart-page" class="page" style="display:none;">
    <div class="container py-4">
      <div class="d-flex align-items-center gap-3 mb-4">
        <button onclick="showPage('home')" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left"></i> Continue Shopping
        </button>
        <h2 class="fw-bold mb-0">Shopping Cart</h2>
      </div>
      
      <div class="row g-4">
        <div class="col-lg-8">
          <div class="bg-white rounded-2xl shadow-soft p-4">
            <div id="cart-items-list"></div>
          </div>
        </div>
        <div class="col-lg-4">
          <div class="bg-white rounded-2xl shadow-soft p-4 sticky-top">
            <h5 class="fw-bold mb-3">Order Summary</h5>
            <div class="d-flex justify-content-between mb-2">
              <span>Subtotal:</span>
              <span id="cart-subtotal">₹0</span>
            </div>
            <div class="d-flex justify-content-between mb-2">
              <span>Shipping:</span>
              <span class="text-success">Free</span>
            </div>
            <hr>
            <div class="d-flex justify-content-between fw-bold fs-5 mb-3">
              <span>Total:</span>
              <span id="cart-total-amount">₹0</span>
            </div>
            <div class="d-grid">
              <button class="btn btn-primary btn-lg" onclick="showCheckout()">
                <i class="bi bi-credit-card me-2"></i>Proceed to Checkout
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Checkout Page -->
  <div id="checkout-page" class="page" style="display:none;">
    <div class="container py-4">
      <div class="d-flex align-items-center gap-3 mb-4">
        <button onclick="showCart()" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left"></i> Back to Cart
        </button>
        <h2 class="fw-bold mb-0">Secure Checkout</h2>
      </div>
      
      <div class="row g-4">
        <div class="col-lg-8">
          <!-- Billing Address -->
          <div class="checkout-step">
            <h5 class="fw-bold mb-3"><i class="bi bi-person me-2"></i>Billing Address</h5>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">First Name *</label>
                <input type="text" class="form-control" required>
              </div>
              <div class="col-md-6">
                <label class="form-label">Last Name *</label>
                <input type="text" class="form-control" required>
              </div>
              <div class="col-12">
                <label class="form-label">Email *</label>
                <input type="email" class="form-control" required>
              </div>
              <div class="col-12">
                <label class="form-label">Phone *</label>
                <input type="tel" class="form-control" required>
              </div>
              <div class="col-12">
                <label class="form-label">Address *</label>
                <textarea class="form-control" rows="2" required></textarea>
              </div>
              <div class="col-md-6">
                <label class="form-label">City *</label>
                <input type="text" class="form-control" required>
              </div>
              <div class="col-md-3">
                <label class="form-label">State *</label>
                <select class="form-select" required>
                  <option value="">Select State</option>
                  <option>Maharashtra</option>
                  <option>Delhi</option>
                  <option>Karnataka</option>
                  <option>Tamil Nadu</option>
                </select>
              </div>
              <div class="col-md-3">
                <label class="form-label">PIN Code *</label>
                <input type="text" class="form-control" required>
              </div>
            </div>
          </div>
          
          <!-- Shipping Address -->
          <div class="checkout-step">
            <h5 class="fw-bold mb-3"><i class="bi bi-truck me-2"></i>Shipping Address</h5>
            <div class="form-check mb-3">
              <input class="form-check-input" type="checkbox" id="same-address" checked>
              <label class="form-check-label" for="same-address">
                Same as billing address
              </label>
            </div>
            <div id="shipping-form" style="display:none;">
              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label">First Name *</label>
                  <input type="text" class="form-control" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Last Name *</label>
                  <input type="text" class="form-control" required>
                </div>
                <div class="col-12">
                  <label class="form-label">Address *</label>
                  <textarea class="form-control" rows="2" required></textarea>
                </div>
                <div class="col-md-6">
                  <label class="form-label">City *</label>
                  <input type="text" class="form-control" required>
                </div>
                <div class="col-md-3">
                  <label class="form-label">State *</label>
                  <select class="form-select" required>
                    <option value="">Select State</option>
                    <option>Maharashtra</option>
                    <option>Delhi</option>
                    <option>Karnataka</option>
                    <option>Tamil Nadu</option>
                  </select>
                </div>
                <div class="col-md-3">
                  <label class="form-label">PIN Code *</label>
                  <input type="text" class="form-control" required>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Payment Method -->
          <div class="checkout-step">
            <h5 class="fw-bold mb-3"><i class="bi bi-credit-card me-2"></i>Payment Method</h5>
            <div class="row g-3">
              <div class="col-12">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="payment" id="card" value="card" checked>
                  <label class="form-check-label" for="card">
                    <i class="bi bi-credit-card me-2"></i>Credit/Debit Card
                  </label>
                </div>
              </div>
              <div class="col-12">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="payment" id="upi" value="upi">
                  <label class="form-check-label" for="upi">
                    <i class="bi bi-phone me-2"></i>UPI (GPay, PhonePe, Paytm)
                  </label>
                </div>
              </div>
              <div class="col-12">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="payment" id="netbanking" value="netbanking">
                  <label class="form-check-label" for="netbanking">
                    <i class="bi bi-bank me-2"></i>Net Banking
                  </label>
                </div>
              </div>
            </div>
            
            <!-- Card Details -->
            <div id="card-details" class="mt-3">
              <div class="row g-3">
                <div class="col-12">
                  <label class="form-label">Card Number *</label>
                  <input type="text" class="form-control" placeholder="1234 5678 9012 3456" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Expiry Date *</label>
                  <input type="text" class="form-control" placeholder="MM/YY" required>
                </div>
                <div class="col-md-6">
                  <label class="form-label">CVV *</label>
                  <input type="text" class="form-control" placeholder="123" required>
                </div>
                <div class="col-12">
                  <label class="form-label">Cardholder Name *</label>
                  <input type="text" class="form-control" required>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Order Summary -->
        <div class="col-lg-4">
          <div class="bg-white rounded-2xl shadow-soft p-4 sticky-top">
            <h5 class="fw-bold mb-3">Order Summary</h5>
            <div id="checkout-items"></div>
            <hr>
            <div class="d-flex justify-content-between mb-2">
              <span>Subtotal:</span>
              <span id="checkout-subtotal">₹0</span>
            </div>
            <div class="d-flex justify-content-between mb-2">
              <span>Shipping:</span>
              <span class="text-success">Free</span>
            </div>
            <div class="d-flex justify-content-between mb-2">
              <span>Tax:</span>
              <span id="checkout-tax">₹0</span>
            </div>
            <hr>
            <div class="d-flex justify-content-between fw-bold fs-5 mb-3">
              <span>Total:</span>
              <span id="checkout-total">₹0</span>
            </div>
            <div class="d-grid">
              <button class="btn btn-success btn-lg" onclick="placeOrder()">
                <i class="bi bi-shield-check me-2"></i>Place Order
              </button>
            </div>
            <div class="text-center mt-3">
              <small class="text-muted">
                <i class="bi bi-lock me-1"></i>Your payment information is secure
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Auth Modal -->
  <div class="modal fade" id="authModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content rounded-2xl">
        <div class="modal-header">
          <h5 class="modal-title">Login / Register</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <ul class="nav nav-tabs mb-3" role="tablist">
            <li class="nav-item">
              <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#login-tab">Login</button>
            </li>
            <li class="nav-item">
              <button class="nav-link" data-bs-toggle="tab" data-bs-target="#register-tab">Register</button>
            </li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane fade show active" id="login-tab">
              <form>
                <div class="mb-3">
                  <label class="form-label">Email</label>
                  <input type="email" class="form-control" required>
                </div>
                <div class="mb-3">
                  <label class="form-label">Password</label>
                  <input type="password" class="form-control" required>
                </div>
                <div class="d-grid">
                  <button type="submit" class="btn btn-primary">Login</button>
                </div>
              </form>
            </div>
            <div class="tab-pane fade" id="register-tab">
              <form>
                <div class="row g-3">
                  <div class="col-6">
                    <label class="form-label">First Name</label>
                    <input type="text" class="form-control" required>
                  </div>
                  <div class="col-6">
                    <label class="form-label">Last Name</label>
                    <input type="text" class="form-control" required>
                  </div>
                  <div class="col-12">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" required>
                  </div>
                  <div class="col-12">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-control" required>
                  </div>
                  <div class="col-12">
                    <label class="form-label">Confirm Password</label>
                    <input type="password" class="form-control" required>
                  </div>
                  <div class="col-12">
                    <div class="d-grid">
                      <button type="submit" class="btn btn-success">Register</button>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="bg-white border-top py-4 mt-4">
  <div class="container">
    <div class="row g-3 align-items-center">
      <div class="col-md-6">
        <div class="d-flex align-items-center gap-2">
          <i class="bi bi-moon-stars text-primary"></i>
          <strong>Rilaxtion Mattress</strong>
        </div>
        <small class="text-muted">© 2024 Rilaxtion Sleep Pvt. Ltd. All rights reserved.</small>
      </div>
      <div class="col-md-6 text-md-end">
        <a href="#" class="me-3">Privacy</a>
        <a href="#" class="me-3">Terms</a>
        <a href="#">Refund Policy</a>
      </div>
    </div>
  </div>
</footer>

<!-- Toast Notifications -->
<div class="toast-container position-fixed top-0 end-0 p-3">
  <div id="toast" class="toast align-items-center text-bg-success border-0">
    <div class="d-flex">
      <div class="toast-body" id="toast-message">Success!</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Application State
let currentPage = 'home';
let currentProduct = null;
let cart = JSON.parse(localStorage.getItem('rilaxtion_cart') || '[]');

// Product Database
const products = [
  {
    id: 'p1',
    name: 'Cool Gel Memory Foam',
    category: 'Memory Foam',
    price: 17999,
    oldPrice: 22999,
    image: 'https://images.unsplash.com/photo-1555041469-a586c61ea9bc?q=80&w=800&auto=format&fit=crop',
    rating: 4.2,
    reviews: 324,
    sizes: ['Single', 'Queen', 'King'],
    thickness: [6, 8, 10],
    description: 'Pressure-relieving foam with cooling gel for Indian summers.'
  },
  {
    id: 'p2',
    name: 'Hybrid Pocket Spring',
    category: 'Hybrid',
    price: 25999,
    oldPrice: 31999,
    image: 'https://images.unsplash.com/photo-1505691723518-36a5ac3b2d52?q=80&w=800&auto=format&fit=crop',
    rating: 4.5,
    reviews: 256,
    sizes: ['Single', 'Queen', 'King'],
    thickness: [8, 10, 12],
    description: 'Bounce of springs + comfort of foam. Zero partner disturbance.'
  },
  {
    id: 'p3',
    name: 'Ortho Support',
    category: 'Orthopedic',
    price: 12999,
    oldPrice: 16499,
    image: 'https://images.unsplash.com/photo-1600490036275-35f7fdc5791d?q=80&w=800&auto=format&fit=crop',
    rating: 4.0,
    reviews: 189,
    sizes: ['Single', 'Queen', 'King'],
    thickness: [6, 8, 10],
    description: 'Firm orthopedic support recommended by physios.'
  },
  {
    id: 'p4',
    name: 'Cloud Plush',
    category: 'Memory Foam',
    price: 19999,
    oldPrice: 24999,
    image: 'https://images.unsplash.com/photo-1496412705862-e0088f16f791?q=80&w=800&auto=format&fit=crop',
    rating: 4.3,
    reviews: 412,
    sizes: ['Single', 'Queen', 'King'],
    thickness: [8, 10, 12],
    description: 'Ultra-plush Euro-top with breathable knit cover.'
  },
  {
    id: 'p5',
    name: 'Natural Latex',
    category: 'Latex',
    price: 28999,
    oldPrice: 34999,
    image: 'https://images.unsplash.com/photo-1524758631624-e2822e304c36?q=80&w=800&auto=format&fit=crop',
    rating: 4.4,
    reviews: 298,
    sizes: ['Single', 'Queen', 'King'],
    thickness: [6, 8, 10],
    description: 'Eco-friendly, durable support with natural bounce.'
  },
  {
    id: 'p6',
    name: 'Essential Foam',
    category: 'Memory Foam',
    price: 9999,
    oldPrice: 12499,
    image: 'https://images.unsplash.com/photo-1497366216548-37526070297c?q=80&w=800&auto=format&fit=crop',
    rating: 3.8,
    reviews: 156,
    sizes: ['Single', 'Queen', 'King'],
    thickness: [6, 8],
    description: 'Great value starter mattress with washable cover.'
  }
];

// Utility Functions
const fmt = (price) => '₹' + price.toLocaleString('en-IN');
const toast = new bootstrap.Toast(document.getElementById('toast'));
const authModal = new bootstrap.Modal(document.getElementById('authModal'));

function showToast(message, type = 'success') {
  const toastEl = document.getElementById('toast');
  const messageEl = document.getElementById('toast-message');
  messageEl.textContent = message;
  toastEl.className = `toast align-items-center text-bg-${type} border-0`;
  toast.show();
}

function saveCart() {
  localStorage.setItem('rilaxtion_cart', JSON.stringify(cart));
  updateCartCounts();
}

function updateCartCounts() {
  const count = cart.reduce((sum, item) => sum + item.quantity, 0);
  document.getElementById('mobile-cart-count').textContent = count;
  document.getElementById('desktop-cart-count').textContent = count;
}

// Navigation Functions
function showPage(page) {
  document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
  document.getElementById(page + '-page').style.display = 'block';
  currentPage = page;
  
  if (page === 'products') {
    renderProducts();
  } else if (page === 'cart') {
    renderCart();
  } else if (page === 'checkout') {
    renderCheckout();
  }
  
  // Close mobile sidebar if open
  const sidebar = bootstrap.Offcanvas.getInstance(document.getElementById('mobileSidebar'));
  if (sidebar) sidebar.hide();
  
  // Scroll to top
  window.scrollTo(0, 0);
}

function toggleSidebar() {
  const sidebar = new bootstrap.Offcanvas(document.getElementById('mobileSidebar'));
  sidebar.toggle();
}

function showAuth() {
  authModal.show();
}

function showCart() {
  showPage('cart');
}

function showCheckout() {
  showPage('checkout');
}

function showCategoryProducts(category) {
  showPage('products');
  // Filter products by category - implement filtering logic here
  renderProducts(category);
}

// Product Functions
function renderProducts(category = null) {
  const grid = document.getElementById('products-grid');
  let filteredProducts = products;
  
  if (category) {
    filteredProducts = products.filter(p => p.category === category);
  }
  
  grid.innerHTML = filteredProducts.map(product => `
    <div class="col-12 col-sm-6 col-lg-4">
      <div class="card product-card h-100 shadow-soft position-relative rounded-2xl" onclick="showProductDetail('${product.id}')">
        <button class="btn btn-light wishlist shadow-sm" onclick="event.stopPropagation(); toggleWishlist(this)">
          <i class="bi bi-heart"></i>
        </button>
        <img class="card-img-top" alt="${product.name}" src="${product.image}" style="height: 200px; object-fit: cover;">
        <div class="card-body">
          <h5 class="card-title">${product.name}</h5>
          <div class="d-flex align-items-center justify-content-between mb-2">
            <div class="price">${fmt(product.price)} <span class="old ms-1">${fmt(product.oldPrice)}</span></div>
            <div class="rating">
              ${generateStars(product.rating)}
            </div>
          </div>
          <p class="text-muted small">${product.description}</p>
          <div class="d-flex gap-2">
            <button class="btn btn-primary flex-grow-1" onclick="event.stopPropagation(); addToCart({id: '${product.id}', name: '${product.name}', price: ${product.price}, image: '${product.image}', size: 'Queen', thickness: 8, quantity: 1})">
              Add to Cart
            </button>
          </div>
        </div>
      </div>
    </div>
  `).join('');
}

function generateStars(rating) {
  const fullStars = Math.floor(rating);
  const hasHalfStar = rating % 1 !== 0;
  let stars = '';
  
  for (let i = 0; i < fullStars; i++) {
    stars += '<i class="bi bi-star-fill"></i>';
  }
  
  if (hasHalfStar) {
    stars += '<i class="bi bi-star-half"></i>';
  }
  
  const emptyStars = 5 - Math.ceil(rating);
  for (let i = 0; i < emptyStars; i++) {
    stars += '<i class="bi bi-star"></i>';
  }
  
  return stars;
}

function showProductDetail(productId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  
  currentProduct = product;
  
  document.getElementById('product-title').textContent = product.name;
  document.getElementById('product-name').textContent = product.name;
  document.getElementById('product-price').textContent = fmt(product.price);
  document.getElementById('product-old-price').textContent = fmt(product.oldPrice);
  document.getElementById('product-image').src = product.image;
  
  // Populate size options
  const sizeSelect = document.getElementById('product-size');
  sizeSelect.innerHTML = product.sizes.map(size => {
    const priceAdjustment = size === 'Single' ? 0 : size === 'Queen' ? 2000 : 5000;
    return `<option value="${size}">${size} ${priceAdjustment > 0 ? `- +₹${priceAdjustment}` : '- Base Price'}</option>`;
  }).join('');
  
  // Populate thickness options
  const thicknessSelect = document.getElementById('product-thickness');
  thicknessSelect.innerHTML = product.thickness.map(t => {
    const priceAdjustment = t === 6 ? 0 : t === 8 ? 1500 : 3000;
    return `<option value="${t}">${t} inches ${priceAdjustment > 0 ? `- +₹${priceAdjustment}` : '- Base Price'}</option>`;
  }).join('');
  
  // Render recommended products
  renderRecommendedProducts(product.category, productId);
  
  showPage('product-detail');
}

function renderRecommendedProducts(category, excludeId) {
  const recommended = products.filter(p => p.category === category && p.id !== excludeId).slice(0, 3);
  const grid = document.getElementById('recommended-products');
  
  grid.innerHTML = recommended.map(product => `
    <div class="col-md-4">
      <div class="card product-card h-100 shadow-soft rounded-2xl" onclick="showProductDetail('${product.id}')">
        <img class="card-img-top" alt="${product.name}" src="${product.image}" style="height: 150px; object-fit: cover;">
        <div class="card-body">
          <h6 class="card-title">${product.name}</h6>
          <div class="price">${fmt(product.price)}</div>
        </div>
      </div>
    </div>
  `).join('');
}

function getCurrentProduct() {
  if (!currentProduct) return null;
  
  const size = document.getElementById('product-size').value;
  const thickness = parseInt(document.getElementById('product-thickness').value);
  const quantity = parseInt(document.getElementById('product-quantity').value);
  
  let price = currentProduct.price;
  
  // Size adjustments
  if (size === 'Queen') price += 2000;
  if (size === 'King') price += 5000;
  
  // Thickness adjustments
  if (thickness === 8) price += 1500;
  if (thickness === 10) price += 3000;
  
  return {
    id: `${currentProduct.id}-${size}-${thickness}`,
    productId: currentProduct.id,
    name: `${currentProduct.name} - ${size} (${thickness}")`,
    price: price,
    image: currentProduct.image,
    size: size,
    thickness: thickness,
    quantity: quantity
  };
}

function changeQuantity(change) {
  const input = document.getElementById('product-quantity');
  const newValue = parseInt(input.value) + change;
  if (newValue >= 1 && newValue <= 10) {
    input.value = newValue;
  }
}

function toggleWishlist(button) {
  button.classList.toggle('text-danger');
  button.innerHTML = button.classList.contains('text-danger') 
    ? '<i class="bi bi-heart-fill"></i>' 
    : '<i class="bi bi-heart"></i>';
}

// Cart Functions
function addToCart(item) {
  const existingItem = cart.find(cartItem => cartItem.id === item.id);
  
  if (existingItem) {
    existingItem.quantity += item.quantity;
  } else {
    cart.push(item);
  }
  
  saveCart();
  showToast('Item added to cart!');
}

function removeFromCart(itemId) {
  cart = cart.filter(item => item.id !== itemId);
  saveCart();
  renderCart();
  showToast('Item removed from cart');
}

function updateCartItemQuantity(itemId, newQuantity) {
  if (newQuantity <= 0) {
    removeFromCart(itemId);
    return;
  }
  
  const item = cart.find(cartItem => cartItem.id === itemId);
  if (item) {
    item.quantity = newQuantity;
    saveCart();
    renderCart();
  }
}

function renderCart() {
  const cartList = document.getElementById('cart-items-list');
  const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
  
  if (cart.length === 0) {
    cartList.innerHTML = `
      <div class="text-center py-5">
        <i class="bi bi-bag fs-1 text-muted"></i>
        <h4 class="mt-3">Your cart is empty</h4>
        <p class="text-muted">Add some products to get started</p>
        <button class="btn btn-primary" onclick="showPage('products')">Continue Shopping</button>
      </div>
    `;
  } else {
    cartList.innerHTML = cart.map(item => `
      <div class="d-flex align-items-center p-3 border-bottom">
        <img src="${item.image}" alt="${item.name}" class="rounded" style="width: 80px; height: 80px; object-fit: cover;">
        <div class="flex-grow-1 ms-3">
          <h6 class="mb-1">${item.name}</h6>
          <p class="text-muted small mb-1">${fmt(item.price)} each</p>
          <div class="d-flex align-items-center gap-2">
            <button class="btn btn-sm btn-outline-secondary" onclick="updateCartItemQuantity('${item.id}', ${item.quantity - 1})">-</button>
            <span class="mx-2">${item.quantity}</span>
            <button class="btn btn-sm btn-outline-secondary" onclick="updateCartItemQuantity('${item.id}', ${item.quantity + 1})">+</button>
          </div>
        </div>
        <div class="text-end">
          <div class="fw-bold">${fmt(item.price * item.quantity)}</div>
          <button class="btn btn-sm btn-outline-danger mt-1" onclick="removeFromCart('${item.id}')">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      </div>
    `).join('');
  }
  
  document.getElementById('cart-subtotal').textContent = fmt(subtotal);
  document.getElementById('cart-total-amount').textContent = fmt(subtotal);
}

function buyNow() {
  const product = getCurrentProduct();
  if (product) {
    cart = [product]; // Replace cart with single product
    saveCart();
    showCheckout();
  }
}

// Checkout Functions
function renderCheckout() {
  const checkoutItems = document.getElementById('checkout-items');
  const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
  const tax = Math.round(subtotal * 0.18); // 18% GST
  const total = subtotal + tax;
  
  checkoutItems.innerHTML = cart.map(item => `
    <div class="d-flex justify-content-between align-items-center mb-2">
      <div>
        <div class="fw-bold small">${item.name}</div>
        <small class="text-muted">Qty: ${item.quantity}</small>
      </div>
      <span>${fmt(item.price * item.quantity)}</span>
    </div>
  `).join('');
  
  document.getElementById('checkout-subtotal').textContent = fmt(subtotal);
  document.getElementById('checkout-tax').textContent = fmt(tax);
  document.getElementById('checkout-total').textContent = fmt(total);
  
  // Setup shipping address toggle
  document.getElementById('same-address').addEventListener('change', function() {
    const shippingForm = document.getElementById('shipping-form');
    shippingForm.style.display = this.checked ? 'none' : 'block';
  });
  
  // Setup payment method toggle
  document.querySelectorAll('input[name="payment"]').forEach(radio => {
    radio.addEventListener('change', function() {
      const cardDetails = document.getElementById('card-details');
      cardDetails.style.display = this.value === 'card' ? 'block' : 'none';
    });
  });
}

function placeOrder() {
  // Simulate order processing
  showToast('Order placed successfully! You will receive a confirmation email shortly.', 'success');
  
  // Clear cart
  cart = [];
  saveCart();
  
  // Redirect to home after delay
  setTimeout(() => {
    showPage('home');
  }, 2000);
}

// Search Functions
function setupSearch() {
  const mobileSearch = document.getElementById('mobile-search');
  const desktopSearch = document.getElementById('desktop-search');
  
  [mobileSearch, desktopSearch].forEach(searchInput => {
    searchInput.addEventListener('input', function() {
      const query = this.value.toLowerCase();
      if (query.length > 2) {
        // Perform search
        const results = products.filter(p => 
          p.name.toLowerCase().includes(query) || 
          p.category.toLowerCase().includes(query) ||
          p.description.toLowerCase().includes(query)
        );
        
        if (results.length > 0) {
          showPage('products');
          renderSearchResults(results);
        }
      }
    });
  });
}

function renderSearchResults(results) {
  const grid = document.getElementById('products-grid');
  
  grid.innerHTML = results.map(product => `
    <div class="col-12 col-sm-6 col-lg-4">
      <div class="card product-card h-100 shadow-soft position-relative rounded-2xl" onclick="showProductDetail('${product.id}')">
        <button class="btn btn-light wishlist shadow-sm" onclick="event.stopPropagation(); toggleWishlist(this)">
          <i class="bi bi-heart"></i>
        </button>
        <img class="card-img-top" alt="${product.name}" src="${product.image}" style="height: 200px; object-fit: cover;">
        <div class="card-body">
          <h5 class="card-title">${product.name}</h5>
          <div class="d-flex align-items-center justify-content-between mb-2">
            <div class="price">${fmt(product.price)} <span class="old ms-1">${fmt(product.oldPrice)}</span></div>
            <div class="rating">
              ${generateStars(product.rating)}
            </div>
          </div>
          <p class="text-muted small">${product.description}</p>
          <div class="d-flex gap-2">
            <button class="btn btn-primary flex-grow-1" onclick="event.stopPropagation(); addToCart({id: '${product.id}', name: '${product.name}', price: ${product.price}, image: '${product.image}', size: 'Queen', thickness: 8, quantity: 1})">
              Add to Cart
            </button>
          </div>
        </div>
      </div>
    </div>
  `).join('');
}

// Animation Functions
function animateCounters() {
  const counters = document.querySelectorAll('.counter');
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const counter = entry.target;
        const target = parseInt(counter.getAttribute('data-target'));
        let current = 0;
        const increment = Math.ceil(target / 100);
        
        const updateCounter = () => {
          current += increment;
          if (current > target) current = target;
          counter.textContent = current.toLocaleString('en-IN');
          
          if (current < target) {
            setTimeout(updateCounter, 30);
          }
        };
        
        updateCounter();
        observer.unobserve(counter);
      }
    });
  }, { threshold: 0.5 });
  
  counters.forEach(counter => observer.observe(counter));
}

// Smooth scrolling for anchor links
function setupSmoothScrolling() {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      const targetId = this.getAttribute('href');
      const targetElement = document.querySelector(targetId);
      
      if (targetElement) {
        e.preventDefault();
        targetElement.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
}

// Form Validations
function setupFormValidations() {
  const forms = document.querySelectorAll('form');
  
  forms.forEach(form => {
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(form);
      const data = Object.fromEntries(formData);
      
      // Basic validation
      let isValid = true;
      const requiredFields = form.querySelectorAll('[required]');
      
      requiredFields.forEach(field => {
        if (!field.value.trim()) {
          field.classList.add('is-invalid');
          isValid = false;
        } else {
          field.classList.remove('is-invalid');
        }
      });
      
      if (isValid) {
        showToast('Form submitted successfully!');
        form.reset();
        
        // Close modal if it's in a modal
        const modal = form.closest('.modal');
        if (modal) {
          bootstrap.Modal.getInstance(modal)?.hide();
        }
      } else {
        showToast('Please fill all required fields', 'danger');
      }
    });
  });
}

// Local Storage Functions
function loadUserPreferences() {
  const preferences = JSON.parse(localStorage.getItem('rilaxtion_preferences') || '{}');
  
  // Apply saved preferences
  if (preferences.theme) {
    document.body.setAttribute('data-theme', preferences.theme);
  }
}

function saveUserPreference(key, value) {
  const preferences = JSON.parse(localStorage.getItem('rilaxtion_preferences') || '{}');
  preferences[key] = value;
  localStorage.setItem('rilaxtion_preferences', JSON.stringify(preferences));
}

// Performance optimizations
function lazyLoadImages() {
  const images = document.querySelectorAll('img[data-src]');
  
  const imageObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;
        img.src = img.dataset.src;
        img.classList.remove('lazy');
        imageObserver.unobserve(img);
      }
    });
  });
  
  images.forEach(img => imageObserver.observe(img));
}

// Error handling
window.addEventListener('error', function(e) {
  console.error('Application error:', e.error);
  showToast('Something went wrong. Please refresh the page.', 'danger');
});

// Service Worker registration (for PWA capabilities)
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/sw.js')
      .then(function(registration) {
        console.log('ServiceWorker registration successful');
      })
      .catch(function(err) {
        console.log('ServiceWorker registration failed');
      });
  });
}

// Initialize Application
document.addEventListener('DOMContentLoaded', function() {
  // Initialize components
  updateCartCounts();
  setupSearch();
  setupSmoothScrolling();
  setupFormValidations();
  loadUserPreferences();
  animateCounters();
  lazyLoadImages();
  
  // Show home page by default
  showPage('home');
  
  // Add some sample data to counters
  const counterData = [
    { selector: '[data-target="3200"]', target: 3200 },
    { selector: '[data-target="15000"]', target: 15000 },
    { selector: '[data-target="120"]', target: 120 },
    { selector: '[data-target="10"]', target: 10 }
  ];
  
  counterData.forEach(item => {
    const element = document.querySelector(item.selector);
    if (element) {
      element.setAttribute('data-target', item.target);
    }
  });
  
  // Auto-carousel for reviews
  const reviewCarousel = document.querySelector('#reviewCarousel');
  if (reviewCarousel) {
    new bootstrap.Carousel(reviewCarousel, {
      interval: 4000,
      wrap: true
    });
  }
  
  console.log('Rilaxtion Mattress App Initialized Successfully!');
});

// Global error boundary
window.addEventListener('unhandledrejection', function(event) {
  console.error('Unhandled promise rejection:', event.reason);
  showToast('Something went wrong. Please try again.', 'danger');
});

// Keyboard shortcuts
document.addEventListener('keydown', function(e) {
  // Ctrl/Cmd + K to focus search
  if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
    e.preventDefault();
    const searchInput = document.querySelector('#mobile-search, #desktop-search');
    if (searchInput) {
      searchInput.focus();
    }
  }
  
  // Escape to close modals/offcanvas
  if (e.key === 'Escape') {
    // Close any open modals
    const modals = document.querySelectorAll('.modal.show');
    modals.forEach(modal => {
      bootstrap.Modal.getInstance(modal)?.hide();
    });
    
    // Close any open offcanvas
    const offcanvases = document.querySelectorAll('.offcanvas.show');
    offcanvases.forEach(offcanvas => {
      bootstrap.Offcanvas.getInstance(offcanvas)?.hide();
    });
  }
});

// Add to home screen prompt (PWA)
let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  
  // Show install button
  const installButton = document.createElement('button');
  installButton.className = 'btn btn-outline-primary btn-sm';
  installButton.innerHTML = '<i class="bi bi-download me-1"></i>Install App';
  installButton.onclick = async () => {
    if (deferredPrompt) {
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      deferredPrompt = null;
      installButton.remove();
    }
  };
  
  // Add to navbar (desktop) or mobile header
  const navbar = document.querySelector('.navbar .d-flex');
  if (navbar && window.innerWidth > 768) {
    navbar.insertBefore(installButton, navbar.firstChild);
  }
});

// Analytics tracking (replace with your analytics code)
function trackEvent(eventName, eventData = {}) {
  console.log('Analytics Event:', eventName, eventData);
  
  // Example: Google Analytics
  // gtag('event', eventName, eventData);
  
  // Example: Facebook Pixel
  // fbq('track', eventName, eventData);
}

// Track important events
function setupAnalytics() {
  // Track product views
  const originalShowProductDetail = showProductDetail;
  showProductDetail = function(productId) {
    trackEvent('view_item', { item_id: productId });
    return originalShowProductDetail(productId);
  };
  
  // Track add to cart
  const originalAddToCart = addToCart;
  addToCart = function(item) {
    trackEvent('add_to_cart', { 
      item_id: item.id, 
      item_name: item.name,
      price: item.price,
      quantity: item.quantity 
    });
    return originalAddToCart(item);
  };
  
  // Track purchases
  const originalPlaceOrder = placeOrder;
  placeOrder = function() {
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    trackEvent('purchase', { 
      value: total,
      currency: 'INR',
      items: cart 
    });
    return originalPlaceOrder();
  };
}

// Initialize analytics
setupAnalytics();

// Cleanup function
window.addEventListener('beforeunload', function() {
  // Save any pending data
  if (cart.length > 0) {
    localStorage.setItem('rilaxtion_cart', JSON.stringify(cart));
  }
});
</script>

</body>
</html>

